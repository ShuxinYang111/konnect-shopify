{{ 'section-konnect-contact.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<section 
  id="contact"
  class="konnect-contact color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding"
>
  <div class="konnect-contact__container page-width page-width--narrow">
    
    {%- if section.settings.heading != blank -%}
      <div class="konnect-contact__header">
        <h2 class="konnect-contact__title {{ section.settings.heading_size }}">
          {{ section.settings.heading }}
        </h2>
        {%- if section.settings.subheading != blank -%}
          <p class="konnect-contact__description">
            {{ section.settings.subheading }}
          </p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <div class="konnect-contact__form-wrapper">
      {%- if section.settings.form_title != blank or section.settings.form_description != blank -%}
        <div class="konnect-contact__form-header">
          {%- if section.settings.form_title != blank -%}
            <h3 class="konnect-contact__form-title">{{ section.settings.form_title }}</h3>
          {%- endif -%}
          {%- if section.settings.form_description != blank -%}
            <div class="konnect-contact__form-description">{{ section.settings.form_description }}</div>
          {%- endif -%}
        </div>
      {%- endif -%}

      {%- form 'contact', id: 'KonnectContactForm', class: 'konnect-contact__form' -%}
        {%- if form.posted_successfully? -%}
          <div class="konnect-contact__success">
            <svg class="konnect-contact__success-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 12l2 2 4-4"></path>
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
            <h3>{{ section.settings.success_message | default: 'Message sent successfully!' }}</h3>
          </div>
        {%- elsif form.errors -%}
          <div class="konnect-contact__errors">
            <svg class="konnect-contact__error-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="15" y1="9" x2="9" y2="15"></line>
              <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <h3>Error sending message</h3>
            <ul>
              {%- for field in form.errors -%}
                <li>{{ field | capitalize }} {{ form.errors.messages[field] }}</li>
              {%- endfor -%}
            </ul>
          </div>
        {%- endif -%}

        <div class="konnect-contact__fields">
          <div class="konnect-contact__field-group">
            <div class="konnect-contact__field">
              <label class="konnect-contact__label" for="ContactForm-name">Name *</label>
              <input
                class="konnect-contact__input"
                autocomplete="name"
                type="text"
                id="ContactForm-name"
                name="contact[name]"
                value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
                placeholder="Your name"
                required
              >
            </div>
            <div class="konnect-contact__field">
              <label class="konnect-contact__label" for="ContactForm-contact">Phone number or Email *</label>
              <input
                class="konnect-contact__input"
                type="text"
                id="ContactForm-contact"
                name="contact[contact_info]"
                value="{% if form.contact_info %}{{ form.contact_info }}{% elsif customer %}{{ customer.email }}{% endif %}"
                placeholder="your@email.com or +1234567890"
                required
              >
            </div>
          </div>

          <div class="konnect-contact__field">
            <label class="konnect-contact__label" for="ContactForm-service">Service of Interest *</label>
            <select
              class="konnect-contact__select"
              id="ContactForm-service"
              name="contact[service_interest]"
              required
            >
              <option value="" disabled selected>Select a service</option>
              <option value="video-production" {% if form.service_interest == 'video-production' %}selected{% endif %}>AI Video Production</option>
              <option value="digital-human" {% if form.service_interest == 'digital-human' %}selected{% endif %}>AI Digital Human</option>
              <option value="image-design" {% if form.service_interest == 'image-design' %}selected{% endif %}>AI Image & Design</option>
              <option value="multiple" {% if form.service_interest == 'multiple' %}selected{% endif %}>Multiple Services</option>
              <option value="consultation" {% if form.service_interest == 'consultation' %}selected{% endif %}>General Consultation</option>
            </select>
            <svg class="konnect-contact__select-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </div>

          <div class="konnect-contact__field">
            <label class="konnect-contact__label" for="ContactForm-body">Message *</label>
            <textarea
              rows="5"
              id="ContactForm-body"
              class="konnect-contact__textarea"
              name="contact[body]"
              placeholder="Tell us about your project, goals, and requirements..."
              required
            >{{ form.body }}</textarea>
          </div>

          <div class="konnect-contact__submit">
            <button type="submit" class="konnect-contact__button">
              {{ section.settings.button_text | default: 'Send request' }}
            </button>
            <p class="konnect-contact__note">Get your quote within 2 hours</p>
          </div>
        </div>
      {%- endform -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Konnect Contact Section",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Section Header"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "default": "Let's make something brilliant with AI.",
      "label": "Heading"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "default": "You get cutting-edge resultsâ€”without the learning curve. Tell us what you need and we'll propose a cost-efficient, custom solution.",
      "label": "Subheading"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "Small"
        },
        {
          "value": "h1",
          "label": "Medium"
        },
        {
          "value": "h0",
          "label": "Large"
        },
        {
          "value": "hxl",
          "label": "Extra large"
        },
        {
          "value": "hxxl",
          "label": "XX-Large"
        }
      ],
      "default": "h1",
      "label": "Heading size"
    },
    {
      "type": "header",
      "content": "Form"
    },
    {
      "type": "text",
      "id": "form_title",
      "default": "Contact",
      "label": "Form Title"
    },
    {
      "type": "richtext",
      "id": "form_description",
      "default": "<p>Ready to transform your ideas into reality? Get in touch with our team.<br><span style=\"font-size: 0.875rem; color: #666; margin-top: 0.5rem; display: block;\">Get your quote within 2 hours</span></p>",
      "label": "Form Description"
    },
    {
      "type": "text",
      "id": "button_text",
      "default": "Send request",
      "label": "Button Text"
    },
    {
      "type": "text",
      "id": "success_message",
      "default": "Message sent successfully! You'll receive your quote within 2 hours.",
      "label": "Success Message"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 80
    }
  ],
  "presets": [
    {
      "name": "Konnect Contact Section"
    }
  ]
}
{% endschema %}
